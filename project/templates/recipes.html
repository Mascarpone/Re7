{% from "_macros.html" import render_stars %}
{% extends template %}
{% block title %}- Recettes{% endblock %}
{% block content %}
<div class="container">
    <h1>Recherche avancée</h1>
    <hr>

    <form>
        <h2>Filtrer par catégories</h2>

        <div class="form-inline filter">
            {% for category in categories %}
            <input type="checkbox" value="cat{{ category.categoryID }}" name="cat{{ category.categoryID }}" id="cat{{ category.categoryID }}">
            <label for="cat{{ category.categoryID }}">{{ category.categoryName }}</label>
            {% endfor %}
        </div>

        <br>
        <br>

        <h2>Filtrer par ingrédients principaux</h2>

        <div class="form-inline filter">
            {% for ingredient in ingredients %}
            <input type="checkbox" value="ing{{ ingredient.ingredientID }}" name="ing{{ ingredient.ingredientID }}" id="ing{{ ingredient.ingredientID }}">
            <label for="ing{{ ingredient.ingredientID }}">{{ ingredient.ingredientName }}</label>
            {% endfor %}
        </div>

        <br>
        <br>

        <h2>Filtrer par intervalle de prix</h2>

        <div class="form-inline filter">
            <div class="form-group">
                <label>min</label>
                <input type="number" class="form-control" id="minprice">
            </div>
            <div class="form-group">
                <label>max</label>
                <input type="number" class="form-control" id="maxprice">
            </div>
        </div>

        <br>
        <br>
        <br>

        <div class="row">
            <div class="col-md-6 col-md-offset-3">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Filtrer par titre ou auteur ..." id="usr" />
                </div>
            </div>
        </div>

        <br>

        <div class="row">
            <div class="col-md-6 col-md-offset-3" align="center">
                <button type="submit" class="btn btn-primary btn-sm-1">Rechercher</button>
            </div>
        </div>

    </form>

    <br>
    <hr>
    <ul class="media-list list-inline recipelist">
        {% for recipe in recipes %}
        <li class="media">
            <a href="{{ url_for('recipe', id=recipe.recipeID) }}">
              <div class="media-left">
                <img width="100" class="media-object img-responsive img-circle" src="{{ images[recipe.recipeID] }}" />
              </div>
              <div class="media-body">
                <h4 class="media-heading">{{ recipe.recipeName }}</h4>
                <span class="recipeAuthor">{{ recipe.login }}</span>
                <br>
                {{ "Pas encore de note" if averages[recipe.recipeID] is none else render_stars(5, averages[recipe.recipeID].averageScore) }}
            </a>
        </li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
